{"ast":null,"code":"'use strict';\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nvar _StyleRule = require('../rules/StyleRule');\nvar _StyleRule2 = _interopRequireDefault(_StyleRule);\nvar _createRule = require('../utils/createRule');\nvar _createRule2 = _interopRequireDefault(_createRule);\nvar _isObservable = require('../utils/isObservable');\nvar _isObservable2 = _interopRequireDefault(_isObservable);\nfunction _interopRequireDefault(obj) {\n  return obj && obj.__esModule ? obj : {\n    'default': obj\n  };\n}\nexports['default'] = {\n  onCreateRule: function onCreateRule(name, decl, options) {\n    if (!(0, _isObservable2['default'])(decl)) return null;\n\n    // Cast `decl` to `Observable`, since it passed the type guard.\n    var style$ = decl;\n    var rule = (0, _createRule2['default'])(name, {}, options);\n\n    // TODO\n    // Call `stream.subscribe()` returns a subscription, which should be explicitly\n    // unsubscribed from when we know this sheet is no longer needed.\n    style$.subscribe(function (style) {\n      for (var prop in style) {\n        rule.prop(prop, style[prop]);\n      }\n    });\n    return rule;\n  },\n  onProcessRule: function onProcessRule(rule) {\n    if (!(rule instanceof _StyleRule2['default'])) return;\n    var styleRule = rule;\n    var style = styleRule.style;\n    var _loop = function _loop(prop) {\n      var value = style[prop];\n      if (!(0, _isObservable2['default'])(value)) return 'continue';\n      delete style[prop];\n      value.subscribe({\n        next: function next(nextValue) {\n          styleRule.prop(prop, nextValue);\n        }\n      });\n    };\n    for (var prop in style) {\n      var _ret = _loop(prop);\n      if (_ret === 'continue') continue;\n    }\n  }\n};","map":null,"metadata":{},"sourceType":"script"}